(function(t){function e(e){for(var s,r,a=e[0],c=e[1],l=e[2],p=0,d=[];p<a.length;p++)r=a[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},i={app:0},o=[];function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"064a":function(t,e,n){"use strict";var s=n("5196"),i=n.n(s);i.a},"0e91":function(t,e,n){},"41b7":function(t,e,n){"use strict";var s=n("96cb"),i=n.n(s);i.a},4319:function(t,e,n){},4779:function(t,e,n){"use strict";var s=n("0e91"),i=n.n(s);i.a},5196:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s,i=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app",attrs:{id:"app"}},[n("div",{staticClass:"container"},[n("h1",[t._v("Blog")]),n("router-view")],1)])},r=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"entries"},[t.isEmpty?n("p",[t._v(" У вас нет ни одной записи. Добавьте, используя кнопку в правом нижнем углу экрана. ")]):n("ul",{staticClass:"entries__list"},t._l(t.entries,(function(e){return n("li",{key:e.id,staticClass:"entries__unit"},[n("entries-item",{attrs:{options:e},on:{openEditor:t.openEditor,removeEntry:t.removeEntry}})],1)})),0),n("button",{staticClass:"entries__add",on:{click:t.openEditorInAddMode}}),n("popup",{ref:"popup",on:{dataReady:t.saveData}})],1)},c=[],l=(n("d3b7"),n("ddb0"),n("5530")),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.active?n("aside",{staticClass:"popup",style:{top:t.topOffset}},[n("div",{staticClass:"popup__overlay",on:{click:t.deactivate}}),n("div",{staticClass:"popup__box"},[n("button",{staticClass:"popup__close",on:{click:t.deactivate}}),t.innerTemplate?n(t.innerTemplate,{tag:"component",attrs:{options:t.innerTemplateOptions},on:{dataReady:t.notify}}):t._e()],1)]):t._e()},p=[],d=n("d4ec"),m=n("bee2"),_=(n("4160"),n("b64b"),n("159b"),function(){function t(e){Object(d["a"])(this,t),this._element=e}return Object(m["a"])(t,[{key:"set",value:function(t){var e=this;Object.keys(t).forEach((function(n){var s=t[n];e._element.style[n]=s}))}},{key:"unset",value:function(t){var e=this;t.forEach((function(t){e._element.style[t]=""}))}}]),t}()),f=_,h=function(){function t(){Object(d["a"])(this,t),this._body,this._isLocked=!1,this._scrollbarWidth,this._cachedScrollTop,this._cacheScrollTop=this._cacheScrollTop.bind(this),this._bodyStylesManager}return Object(m["a"])(t,[{key:"_getScrollbarWidth",value:function(){return window.innerWidth-document.documentElement.clientWidth}},{key:"_cacheScrollTop",value:function(){this._cachedScrollTop=window.pageYOffset||document.documentElement.scrollTop}},{key:"getCachedScrollTop",value:function(){return this._cachedScrollTop}},{key:"lock",value:function(){window.removeEventListener("scroll",this._cacheScrollTop),this._bodyStylesManager.set({position:"fixed",top:"-".concat(this._cachedScrollTop,"px"),left:0,right:0,bottom:0,paddingRight:"".concat(this._scrollbarWidth,"px")}),this._isLocked=!0}},{key:"unlock",value:function(){this._bodyStylesManager.unset(["position","top","left","right","bottom","paddingRight"]),this._isLocked=!1,window.scrollTo(0,this._cachedScrollTop),window.addEventListener("scroll",this._cacheScrollTop)}},{key:"_addEvents",value:function(){window.removeEventListener("load",this._cacheScrollTop),window.removeEventListener("scroll",this._cacheScrollTop),window.addEventListener("load",this._cacheScrollTop),window.addEventListener("scroll",this._cacheScrollTop)}},{key:"init",value:function(){return this._addEvents(),this._cacheScrollTop(),this._scrollbarWidth=this._getScrollbarWidth(),this._bodyStylesManager=new f(document.body),this}}]),t}(),v=h,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{ref:"form",staticClass:"request",on:{submit:function(e){return e.preventDefault(),t.notify(e)}}},[t.options.id?n("input",{attrs:{type:"hidden",name:"id"},domProps:{value:t.options.id}}):t._e(),n("editor-title",{attrs:{mode:t.options.mode}}),n("div",{staticClass:"request__item"},[n("label",{staticClass:"request__subtitle",attrs:{for:"title"}},[t._v("Заголовок")]),n("input",{staticClass:"request__field",attrs:{type:"text",name:"title",id:"title",required:""},domProps:{value:t.options.title}})]),n("div",{staticClass:"request__item"},[n("label",{staticClass:"request__subtitle",attrs:{for:"shortDescription"}},[t._v("Краткое описание")]),n("textarea",{staticClass:"request__textspace",attrs:{name:"shortDescription",id:"shortDescription",required:""},domProps:{value:t.options.shortDescription}})]),n("div",{staticClass:"request__item"},[n("label",{staticClass:"request__subtitle",attrs:{for:"longDescription"}},[t._v("Полное описание")]),n("textarea",{staticClass:"request__textspace",attrs:{name:"longDescription",id:"longDescription",required:""},domProps:{value:t.options.longDescription}})]),t.commentsExists?n("editor-comments",{attrs:{items:t.options.comments}}):t._e(),t._m(0)],1)},y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"request__item"},[n("button",[t._v("Сохранить")])])}],E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[t._v(" "+t._s(t.title)+" ")])},C=[],O={name:"EditorTitle",props:{mode:String},computed:{title:function(){var t;switch(this.mode){case"addEntry":t="Добавить запись";break;case"editEntry":t="Редактировать запись";break;default:t="Редактор"}return t}}},g=O,j=n("2877"),T=Object(j["a"])(g,E,C,!1,null,null,null),w=T.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"speech"},[n("h3",[t._v("Комментарии")]),n("div",{staticClass:"speech__note"},[t._v(" Удалить? ")]),n("ul",{staticClass:"speech__list"},t._l(t.items,(function(t){return n("li",{key:t.id,staticClass:"speech__item"},[n("editor-comments-item",{attrs:{options:t}})],1)})),0)])},k=[],S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"speech__unit"},[n("div",{staticClass:"speech__content"},[n("div",{staticClass:"speech__author"},[t._v(" "+t._s(t.options.author)+" ")]),n("div",{staticClass:"speech__description"},[t._v(" "+t._s(t.options.description)+" ")])]),n("input",{staticClass:"speech__control",attrs:{type:"checkbox",name:"commentsToRemove[]"},domProps:{value:t.options.id}})])},$=[],q={name:"EditorComments",props:{options:Object}},D=q,P=(n("83c2"),Object(j["a"])(D,S,$,!1,null,"66655964",null)),I=P.exports,M={name:"EditorComments",components:{EditorCommentsItem:I},props:{items:Array}},L=M,R=(n("4779"),Object(j["a"])(L,x,k,!1,null,"28fa4904",null)),W=R.exports,A={name:"Editor",components:{EditorTitle:w,EditorComments:W},props:{options:Object},computed:{commentsExists:function(){return this.options.comments&&this.options.comments.length>0}},methods:{notify:function(){var t=new FormData(this.$refs.form);this.$emit("dataReady",this.options.mode,t)}}},B=A,F=Object(j["a"])(B,b,y,!1,null,null,null),H=F.exports,J={name:"Popup",components:{Editor:H},data:function(){return{active:!1,topOffset:"",innerTemplate:"",innerTemplateOptions:""}},watch:{active:function(t){t?(s.lock(),this.topOffset="".concat(s.getCachedScrollTop(),"px")):s.unlock()}},mounted:function(){s=(new v).init()},methods:{activate:function(t,e){this.active=!0,this.innerTemplate=t,this.innerTemplateOptions=e},deactivate:function(){this.active=!1,this.innerTemplate="",this.innerTemplateProps=""},notify:function(t,e){this.$emit("dataReady",t,e)}}},N=J,Y=(n("41b7"),Object(j["a"])(N,u,p,!1,null,null,null)),z=Y.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"entries__item snippet"},[n("div",{staticClass:"snippet__headline"},[n("h2",{staticClass:"snippet__title"},[n("router-link",{attrs:{to:"/detail/"+t.options.id}},[t._v(" "+t._s(t.options.title)+" ")])],1),n("div",{staticClass:"snippet__interface"},[n("button",{staticClass:"snippet__control snippet__control_edit",on:{click:t.editEntry}}),n("button",{staticClass:"snippet__control snippet__control_remove",on:{click:t.removeEntry}})])]),n("div",{staticClass:"snippet__description",domProps:{innerHTML:t._s(t.options.shortDescription)}}),t.commentsExists?n("div",[t._v(" Комментарии: "),n("span",{staticClass:"snippet__comments-value"},[t._v(t._s(t.options.comments.length))])]):t._e()])},K=[],Q={name:"EntriesItem",props:{options:Object},computed:{commentsExists:function(){return this.options.comments.length>0}},methods:{showDetail:function(){this.$emit("showDetail",this.options)},editEntry:function(){var t=Object.assign({},{mode:"editEntry"},this.options);this.$emit("openEditor",t)},removeEntry:function(){this.$emit("removeEntry",this.options.id)}}},U=Q,V=(n("91e1"),Object(j["a"])(U,G,K,!1,null,"cb75c55c",null)),X=V.exports,Z=n("2f62"),tt={name:"Entries",components:{Popup:z,EntriesItem:X},computed:Object(l["a"])(Object(l["a"])({},Object(Z["b"])(["entries"])),{},{isEmpty:function(){return this.entries.length<1}}),methods:Object(l["a"])(Object(l["a"])({},Object(Z["c"])(["addEntry","editEntry","removeEntry","addComment"])),{},{openEditor:function(t){this.$refs.popup.activate("Editor",t)},openEditorInAddMode:function(){this.$refs.popup.activate("Editor",{mode:"addEntry"})},saveData:function(t,e){this[t](e),this.$refs.popup.deactivate()}})},et=tt,nt=(n("c450"),Object(j["a"])(et,a,c,!1,null,"4a5727b8",null)),st=nt.exports,it=(n("8512"),{name:"App"}),ot=it,rt=(n("5c0b"),Object(j["a"])(ot,o,r,!1,null,null,null)),at=rt.exports,ct=(n("caad"),n("a434"),n("2532"),n("b85c")),lt=n("0e44");n("25f0");function ut(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}i["a"].use(Z["a"]);var pt=new Z["a"].Store({plugins:[Object(lt["a"])({key:"blog"})],state:{entries:[]},getters:{entries:function(t){return t.entries},getEntryById:function(t,e){return function(e){for(var n,s=0;s<t.entries.length;s++){var i=t.entries[s];if(i.id==e){n=i;break}}return n}}},mutations:{addEntry:function(t,e){var n,s={id:ut(),comments:[]},i=Object(ct["a"])(e.entries());try{for(i.s();!(n=i.n()).done;){var o=n.value,r=o[0],a=o[1];s[r]=a}}catch(c){i.e(c)}finally{i.f()}t.entries.push(s)},editEntry:function(t,e){var n,s=e.get("id"),i=this.getters.getEntryById(s),o=Object(ct["a"])(e.entries());try{for(o.s();!(n=o.n()).done;){var r=n.value,a=r[0],c=r[1];if("commentsToRemove[]"===a)for(var l=e.getAll("commentsToRemove[]"),u=0;u<i.comments.length;u++){var p=i.comments[u];l.includes(p.id)&&i.comments.splice(u,1)}else i[a]=c}}catch(d){o.e(d)}finally{o.f()}},removeEntry:function(t,e){for(var n,s=0;s<t.entries.length;s++){var i=t.entries[s];if(i.id===e){n=s;break}}t.entries.splice(n,1)},addComment:function(t,e){var n,s={id:ut()},i=Object(ct["a"])(e.entries());try{for(i.s();!(n=i.n()).done;){var o=n.value,r=o[0],a=o[1];s[r]=a}}catch(u){i.e(u)}finally{i.f()}var c=e.get("entryId"),l=this.getters.getEntryById(c);l.comments?l.comments.push(s):l.comments=[s]}},actions:{},modules:{}}),dt=n("8c4f"),mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("entries")},_t=[],ft={name:"Main",components:{Entries:st}},ht=ft,vt=Object(j["a"])(ht,mt,_t,!1,null,null,null),bt=vt.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("entry",{attrs:{options:t.entryOptions}})},Et=[],Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"detail"},[n("router-link",{staticClass:"return",attrs:{to:"/"}},[t._v(" На главную ")]),n("h3",[t._v(" "+t._s(this.options.title)+" ")]),n("div",{staticClass:"detail__description",domProps:{innerHTML:t._s(this.options.longDescription)}}),this.options.comments?n("entry-comments",{attrs:{items:this.options.comments}}):t._e(),n("entry-comments-form",{attrs:{id:this.options.id},on:{dataReady:t.addCommentToStore}})],1)},Ot=[],gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"detail__comments comments"},[n("h4",[t._v("Комментарии")]),n("ul",{staticClass:"comments__list"},t._l(t.items,(function(t){return n("li",{key:t.id},[n("entry-comments-item",{attrs:{options:t}})],1)})),0)])},jt=[],Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comments__item"},[n("div",{staticClass:"comments__text"},[t._v(" "+t._s(t.options.description)+" ")]),n("div",{staticClass:"comments__author"},[t._v(" "+t._s(t.options.author)+" ")])])},wt=[],xt={name:"CommentsItem",props:{options:Object}},kt=xt,St=(n("75c4"),Object(j["a"])(kt,Tt,wt,!1,null,"efb87690",null)),$t=St.exports,qt={name:"Comments",components:{EntryCommentsItem:$t},props:{items:Array}},Dt=qt,Pt=(n("064a"),Object(j["a"])(Dt,gt,jt,!1,null,"37b9841b",null)),It=Pt.exports,Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{ref:"form",staticClass:"detail__request request",on:{submit:function(e){return e.preventDefault(),t.notify(e)}}},[n("input",{attrs:{type:"hidden",name:"entryId"},domProps:{value:t.id}}),t._m(0),t._m(1),n("div",{staticClass:"request__item"},[n("button",{attrs:{disabled:t.inactive}},[t._v("Отправить")])])])},Lt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"request__item"},[n("label",{staticClass:"request__subtitle",attrs:{for:"author"}},[t._v("Ваше имя")]),n("input",{staticClass:"request__field",attrs:{type:"text",name:"author",id:"author",required:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"request__item"},[n("label",{staticClass:"request__subtitle",attrs:{for:"description"}},[t._v("Комментарий")]),n("textarea",{staticClass:"request__textspace",attrs:{name:"description",id:"description",required:""}})])}],Rt=(n("a9e3"),{name:"CommentsForm",props:{id:[String,Number]},data:function(){return{inactive:!1,timer:null}},methods:{notify:function(){var t=this,e=new FormData(this.$refs.form);this.$emit("dataReady",e),this.inactive=!0,clearTimeout(this.timer),setTimeout((function(){t.inactive=!1}),2e3)}},beforeDestroy:function(){clearTimeout(this.timer)}}),Wt=Rt,At=(n("ddcb"),Object(j["a"])(Wt,Mt,Lt,!1,null,"43d99ad7",null)),Bt=At.exports,Ft={name:"Detail",components:{EntryComments:It,EntryCommentsForm:Bt},props:{options:Object},methods:Object(l["a"])({},Object(Z["c"])({addCommentToStore:"addComment"}))},Ht=Ft,Jt=(n("9127"),Object(j["a"])(Ht,Ct,Ot,!1,null,"0693e9fa",null)),Nt=Jt.exports,Yt={name:"Detail",components:{Entry:Nt},data:function(){return{entryOptions:null}},computed:Object(l["a"])({},Object(Z["b"])(["getEntryById"])),created:function(){var t=this.$route.params.id;this.entryOptions=this.getEntryById(t)}},zt=Yt,Gt=Object(j["a"])(zt,yt,Et,!1,null,null,null),Kt=Gt.exports,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-link",{staticClass:"return",attrs:{to:"/"}},[t._v(" На главную ")]),n("p",[t._v(" По вашему запросу ничего не найдено. ")])],1)},Ut=[],Vt={name:"Empty"},Xt=Vt,Zt=Object(j["a"])(Xt,Qt,Ut,!1,null,null,null),te=Zt.exports;i["a"].use(dt["a"]);var ee=[{path:"/",component:bt},{path:"/detail/:id",component:Kt},{path:"*",component:te}],ne=new dt["a"]({routes:ee}),se=ne;i["a"].config.productionTip=!1,new i["a"]({router:se,store:pt,render:function(t){return t(at)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var s=n("9c0c"),i=n.n(s);i.a},"6cfd":function(t,e,n){},"75c4":function(t,e,n){"use strict";var s=n("f308"),i=n.n(s);i.a},"7e56":function(t,e,n){},"822a":function(t,e,n){},"83c2":function(t,e,n){"use strict";var s=n("7e56"),i=n.n(s);i.a},9127:function(t,e,n){"use strict";var s=n("6cfd"),i=n.n(s);i.a},"91e1":function(t,e,n){"use strict";var s=n("e2e5"),i=n.n(s);i.a},"96cb":function(t,e,n){},"9c0c":function(t,e,n){},c450:function(t,e,n){"use strict";var s=n("822a"),i=n.n(s);i.a},ddcb:function(t,e,n){"use strict";var s=n("4319"),i=n.n(s);i.a},e2e5:function(t,e,n){},f308:function(t,e,n){}});
//# sourceMappingURL=app.567bf82a.js.map